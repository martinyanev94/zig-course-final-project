const std = @import("std");
const net = std.net;

pub fn main() !void {
    const listener = try net.StreamServer.listen(8080);
    defer listener.close();

    while (true) {
        const conn = try listener.accept();
        defer conn.close();
        const request = try conn.recv();
        handle_request(conn, request);
    }
}

fn handle_request(conn: *net.Stream, request: []const u8) void {
    const response = "HTTP/1.1 200 OK\r\nContent-Length: 13\r\n\r\nHello, world!";
    const _ = conn.send(response);
}
